# Phase 7: ãƒ‡ãƒ¼ã‚¿åˆ†æã¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ - å®Ÿè£…è¨ˆç”»æ›¸

**æƒ³å®šæœŸé–“**: 2é€±é–“ï¼ˆå®Ÿåƒ14æ—¥ï¼‰  
**é–‹å§‹äºˆå®š**: Phase 6å®Œäº†å¾Œ  
**æ‹…å½“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + ãƒ‡ãƒ¼ã‚¿åˆ†æ  
**ç›®çš„**: ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„æ€æ±ºå®šæ”¯æ´ã¨æ»åœ¨æ™‚é–“å»¶é•·

---

## ğŸ“Œ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ç›®æ¨™
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æœ‰ç›Šãªæ´å¯Ÿã‚’æä¾›
- ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã§ç›´æ„Ÿçš„ãªãƒ‡ãƒ¼ã‚¿ç†è§£ã‚’ä¿ƒé€²
- ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã§å¤–éƒ¨åˆ©ç”¨ã‚’å¯èƒ½ã«ã™ã‚‹

### ä¸»è¦æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦é †ï¼‰

1. **çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** ğŸ”¥ï¼ˆ5æ—¥é–“ï¼‰
   - ä¾¡æ ¼åˆ†å¸ƒã‚°ãƒ©ãƒ•ï¼ˆChart.jsï¼‰
   - ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°
   - ãƒ‘ãƒ¼ã‚¯åˆ¥æ¯”è¼ƒ

2. **ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ** ğŸ”¥ï¼ˆ4æ—¥é–“ï¼‰
   - äººæ°—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
   - ä¾¡æ ¼å¸¯åˆ¥äººæ°—åº¦
   - å­£ç¯€é™å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

3. **ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½** ğŸŸ¡ï¼ˆ3æ—¥é–“ï¼‰
   - CSV/JSONãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
   - çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

4. **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°** ğŸŸ¢ï¼ˆ2æ—¥é–“ï¼‰
   - E2Eãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ6ä»¶ï¼‰
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

---

## ğŸ¯ ç¾çŠ¶åˆ†æ

### âœ… Phase 6å®Œäº†æ™‚ç‚¹ã§ã®å®Ÿè£…çŠ¶æ³

#### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- âœ… MenuItemå‹ï¼ˆæ „é¤Šæˆåˆ†å«ã‚€ï¼‰
- âœ… Restaurantå‹
- âŒ é›†è¨ˆãƒ‡ãƒ¼ã‚¿ãªã— â†’ Phase 7ã§è¨ˆç®—ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥

#### æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- âœ… MenuList.tsxï¼ˆã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºï¼‰
- âœ… FilterPanel.tsxï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ï¼‰
- âŒ çµ±è¨ˆè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã—

#### API
- âœ… `/api/menus`ï¼ˆå…¨ä»¶å–å¾—å¯èƒ½ï¼‰
- âŒ `/api/stats`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãªã— â†’ Phase 7ã§è¿½åŠ 

---

## ğŸ› ï¸ æŠ€è¡“è¨­è¨ˆ

### æ–°è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

#### ã‚°ãƒ©ãƒ•æç”»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¯”è¼ƒ

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ã‚µã‚¤ã‚ºï¼ˆgzipï¼‰ | ç‰¹å¾´ | æ¡ç”¨åˆ¤æ–­ |
|-----------|---------------|------|---------|
| Chart.js | 197KB | è±Šå¯Œãªã‚°ãƒ©ãƒ•ç¨®é¡ã€è»½é‡ | âœ… æ¡ç”¨ |
| Recharts | 280KB | Reactå‘ã‘ã€å®£è¨€çš„ | âŒ ã‚µã‚¤ã‚ºå¤§ |
| Victory | 350KB | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è±Šå¯Œ | âŒ ã‚µã‚¤ã‚ºå¤§ |
| Nivo | 420KB | ç¾ã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³ | âŒ ã‚µã‚¤ã‚ºå¤§ |

**åˆ¤æ–­**: Chart.js v4.4.0ã‚’æ¡ç”¨ï¼ˆè»½é‡ã‹ã¤å®Ÿç¸¾è±Šå¯Œï¼‰

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm install chart.js@4.4.7 react-chartjs-2@5.2.0
npm install date-fns@3.2.0  # æ—¥ä»˜æ“ä½œ
npm install file-saver@2.0.5 @types/file-saver  # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
```

### ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯

#### çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å‹å®šç¾©
```typescript
interface MenuStatistics {
  totalMenus: number;
  averagePrice: number;
  priceRange: {
    min: number;
    max: number;
  };
  categoryDistribution: {
    [category: string]: number;
  };
  parkComparison: {
    disneyland: {
      count: number;
      avgPrice: number;
    };
    disneysea: {
      count: number;
      avgPrice: number;
    };
  };
  priceDistribution: {
    range: string;
    count: number;
  }[];
  popularMenus: {
    menuId: string;
    favoritesCount: number;
  }[];
}
```

#### APIæ‹¡å¼µï¼ˆFastAPIï¼‰

`api/index.py`ã«è¿½åŠ ï¼š
```python
from collections import Counter
from statistics import mean

@app.get("/api/stats")
async def get_statistics():
    menus = load_menus()
    
    stats = {
        "totalMenus": len(menus),
        "averagePrice": mean([m["price"] for m in menus]),
        "priceRange": {
            "min": min(m["price"] for m in menus),
            "max": max(m["price"] for m in menus)
        },
        "categoryDistribution": dict(Counter(m["category"] for m in menus)),
        "parkComparison": calculate_park_comparison(menus),
        "priceDistribution": calculate_price_distribution(menus),
    }
    
    return {"success": True, "data": stats}

def calculate_price_distribution(menus):
    ranges = [
        ("~Â¥500", 0, 500),
        ("Â¥501-1000", 501, 1000),
        ("Â¥1001-1500", 1001, 1500),
        ("Â¥1501-2000", 1501, 2000),
        ("Â¥2001~", 2001, 999999)
    ]
    
    distribution = []
    for label, min_price, max_price in ranges:
        count = sum(1 for m in menus if min_price <= m["price"] <= max_price)
        distribution.append({"range": label, "count": count})
    
    return distribution
```

---

## ğŸ“… å®Ÿè£…æ‰‹é †

### Phase 7.1: çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ5æ—¥é–“ï¼‰

#### Day 1: Chart.jsã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ãƒ‡ãƒ¼ã‚¿å–å¾—

**ã‚¿ã‚¹ã‚¯ 7.1.1: å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install chart.js@4.4.7 react-chartjs-2@5.2.0 date-fns@3.2.0
```

**ã‚¿ã‚¹ã‚¯ 7.1.2: useStatistics Hookã®ä½œæˆ**

`hooks/useStatistics.ts`:
```typescript
import { useQuery } from '@tanstack/react-query';
import { api } from '../services/api';

export const useStatistics = () => {
  return useQuery({
    queryKey: ['statistics'],
    queryFn: async () => {
      const response = await api.get('/api/stats');
      return response.data.data;
    },
    staleTime: 1000 * 60 * 60, // 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  });
};
```

#### Day 2-3: ä¾¡æ ¼åˆ†å¸ƒã‚°ãƒ©ãƒ•å®Ÿè£…

**ã‚¿ã‚¹ã‚¯ 7.1.3: PriceDistributionChart.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { Bar } from 'react-chartjs-2';
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
} from 'chart.js';
import { Box, Typography, Paper } from '@mui/material';

ChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);

interface PriceDistributionChartProps {
  data: {
    range: string;
    count: number;
  }[];
}

export const PriceDistributionChart: React.FC<PriceDistributionChartProps> = ({ data }) => {
  const chartData = {
    labels: data.map(d => d.range),
    datasets: [
      {
        label: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°',
        data: data.map(d => d.count),
        backgroundColor: 'rgba(54, 162, 235, 0.6)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1,
      },
    ],
  };

  const options = {
    responsive: true,
    plugins: {
      legend: {
        position: 'top' as const,
      },
      title: {
        display: true,
        text: 'ä¾¡æ ¼å¸¯åˆ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°',
      },
    },
    scales: {
      y: {
        beginAtZero: true,
        ticks: {
          stepSize: 50,
        },
      },
    },
  };

  return (
    <Paper sx={{ p: 3 }}>
      <Bar data={chartData} options={options} />
    </Paper>
  );
};
```

**ã‚¿ã‚¹ã‚¯ 7.1.4: CategoryDistributionChart.tsxï¼ˆå††ã‚°ãƒ©ãƒ•ï¼‰**

```typescript
import { Pie } from 'react-chartjs-2';
import { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js';

ChartJS.register(ArcElement, Tooltip, Legend);

export const CategoryDistributionChart: React.FC<{ data: Record<string, number> }> = ({ data }) => {
  const chartData = {
    labels: Object.keys(data),
    datasets: [
      {
        label: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°',
        data: Object.values(data),
        backgroundColor: [
          'rgba(255, 99, 132, 0.6)',
          'rgba(54, 162, 235, 0.6)',
          'rgba(255, 206, 86, 0.6)',
          'rgba(75, 192, 192, 0.6)',
          'rgba(153, 102, 255, 0.6)',
          'rgba(255, 159, 64, 0.6)',
        ],
      },
    ],
  };

  const options = {
    responsive: true,
    plugins: {
      legend: {
        position: 'right' as const,
      },
      title: {
        display: true,
        text: 'ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼åˆ†å¸ƒ',
      },
    },
  };

  return (
    <Paper sx={{ p: 3 }}>
      <Pie data={chartData} options={options} />
    </Paper>
  );
};
```

#### Day 4: ãƒ‘ãƒ¼ã‚¯æ¯”è¼ƒã‚°ãƒ©ãƒ•

**ã‚¿ã‚¹ã‚¯ 7.1.5: ParkComparisonChart.tsxï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰**

```typescript
import { Bar } from 'react-chartjs-2';

export const ParkComparisonChart: React.FC<{
  data: {
    disneyland: { count: number; avgPrice: number };
    disneysea: { count: number; avgPrice: number };
  };
}> = ({ data }) => {
  const chartData = {
    labels: ['ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°', 'å¹³å‡ä¾¡æ ¼'],
    datasets: [
      {
        label: 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰',
        data: [data.disneyland.count, data.disneyland.avgPrice],
        backgroundColor: 'rgba(255, 99, 132, 0.6)',
      },
      {
        label: 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼',
        data: [data.disneysea.count, data.disneysea.avgPrice],
        backgroundColor: 'rgba(54, 162, 235, 0.6)',
      },
    ],
  };

  const options = {
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'ãƒ‘ãƒ¼ã‚¯åˆ¥æ¯”è¼ƒ',
      },
    },
    scales: {
      y: {
        beginAtZero: true,
      },
    },
  };

  return (
    <Paper sx={{ p: 3 }}>
      <Bar data={chartData} options={options} />
    </Paper>
  );
};
```

#### Day 5: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸çµ±åˆ

**ã‚¿ã‚¹ã‚¯ 7.1.6: Statistics.tsxãƒšãƒ¼ã‚¸ä½œæˆ**

```typescript
import { Container, Grid, Typography, CircularProgress, Alert } from '@mui/material';
import { useStatistics } from '../../hooks/useStatistics';
import { PriceDistributionChart } from '../../components/charts/PriceDistributionChart';
import { CategoryDistributionChart } from '../../components/charts/CategoryDistributionChart';
import { ParkComparisonChart } from '../../components/charts/ParkComparisonChart';

export const Statistics = () => {
  const { data: stats, isLoading, error } = useStatistics();

  if (isLoading) return <CircularProgress />;
  if (error) return <Alert severity="error">ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</Alert>;
  if (!stats) return null;

  return (
    <Container maxWidth="xl" sx={{ py: 4 }}>
      <Typography variant="h4" gutterBottom>
        ğŸ“Š çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
      </Typography>

      {/* ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ */}
      <Grid container spacing={3} sx={{ mb: 4 }}>
        <Grid item xs={12} sm={6} md={3}>
          <Paper sx={{ p: 2, textAlign: 'center' }}>
            <Typography variant="h3" color="primary">{stats.totalMenus}</Typography>
            <Typography variant="body2">ç·ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°</Typography>
          </Paper>
        </Grid>
        <Grid item xs={12} sm={6} md={3}>
          <Paper sx={{ p: 2, textAlign: 'center' }}>
            <Typography variant="h3" color="primary">Â¥{Math.round(stats.averagePrice)}</Typography>
            <Typography variant="body2">å¹³å‡ä¾¡æ ¼</Typography>
          </Paper>
        </Grid>
        <Grid item xs={12} sm={6} md={3}>
          <Paper sx={{ p: 2, textAlign: 'center' }}>
            <Typography variant="h3" color="primary">Â¥{stats.priceRange.min}</Typography>
            <Typography variant="body2">æœ€ä½ä¾¡æ ¼</Typography>
          </Paper>
        </Grid>
        <Grid item xs={12} sm={6} md={3}>
          <Paper sx={{ p: 2, textAlign: 'center' }}>
            <Typography variant="h3" color="primary">Â¥{stats.priceRange.max}</Typography>
            <Typography variant="body2">æœ€é«˜ä¾¡æ ¼</Typography>
          </Paper>
        </Grid>
      </Grid>

      {/* ã‚°ãƒ©ãƒ•ã‚¨ãƒªã‚¢ */}
      <Grid container spacing={3}>
        <Grid item xs={12} lg={8}>
          <PriceDistributionChart data={stats.priceDistribution} />
        </Grid>
        <Grid item xs={12} lg={4}>
          <CategoryDistributionChart data={stats.categoryDistribution} />
        </Grid>
        <Grid item xs={12}>
          <ParkComparisonChart data={stats.parkComparison} />
        </Grid>
      </Grid>
    </Container>
  );
};
```

**ã‚¿ã‚¹ã‚¯ 7.1.7: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±è¨ˆãƒšãƒ¼ã‚¸è¿½åŠ **

`components/layout/Header.tsx`:
```typescript
<Button component={Link} to="/statistics" color="inherit">
  çµ±è¨ˆ
</Button>
```

---

### Phase 7.2: ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æï¼ˆ4æ—¥é–“ï¼‰

#### Day 6-7: äººæ°—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°

**ã‚¿ã‚¹ã‚¯ 7.2.1: ãŠæ°—ã«å…¥ã‚Šæ•°ã®é›†è¨ˆ**

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆ`api/index.py`ï¼‰:
```python
@app.get("/api/menus/popular")
async def get_popular_menus(limit: int = 10):
    # ãŠæ°—ã«å…¥ã‚Šæ•°ã§ã‚½ãƒ¼ãƒˆï¼ˆå°†æ¥çš„ã«ã¯DBã‹ã‚‰å–å¾—ï¼‰
    # ç¾åœ¨ã¯æ‰‹å‹•é¸å®šã®popular_menus.jsonã‚’ä½¿ç”¨
    popular = load_popular_menus()
    return {"success": True, "data": popular[:limit]}
```

**ã‚¿ã‚¹ã‚¯ 7.2.2: PopularRanking.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { List, ListItem, ListItemAvatar, Avatar, ListItemText, Chip } from '@mui/material';
import TrendingUpIcon from '@mui/icons-material/TrendingUp';

export const PopularRanking: React.FC<{ menus: MenuItem[] }> = ({ menus }) => {
  return (
    <Paper sx={{ p: 3 }}>
      <Typography variant="h6" gutterBottom>
        ğŸ”¥ äººæ°—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
      </Typography>
      <List>
        {menus.map((menu, index) => (
          <ListItem
            key={menu.id}
            component={Link}
            to={`/menu/${menu.id}`}
            sx={{
              borderRadius: 1,
              mb: 1,
              '&:hover': { bgcolor: 'action.hover' },
            }}
          >
            <ListItemAvatar>
              <Avatar sx={{ bgcolor: index < 3 ? 'primary.main' : 'grey.400' }}>
                {index + 1}
              </Avatar>
            </ListItemAvatar>
            <Avatar src={menu.imageUrl} sx={{ mr: 2 }} />
            <ListItemText
              primary={menu.name}
              secondary={menu.restaurant}
            />
            <Chip
              label={`Â¥${menu.price}`}
              size="small"
              color={index < 3 ? 'primary' : 'default'}
            />
            <TrendingUpIcon color="action" sx={{ ml: 1 }} />
          </ListItem>
        ))}
      </List>
    </Paper>
  );
};
```

#### Day 8: ä¾¡æ ¼å¸¯åˆ¥äººæ°—åº¦

**ã‚¿ã‚¹ã‚¯ 7.2.3: PriceRangePopularity.tsxï¼ˆæ¨ªæ£’ã‚°ãƒ©ãƒ•ï¼‰**

```typescript
import { Bar } from 'react-chartjs-2';

export const PriceRangePopularity: React.FC = () => {
  const { data: menus } = useMenus({ limit: 1000 });
  
  // ä¾¡æ ¼å¸¯ã”ã¨ã«ãŠæ°—ã«å…¥ã‚Šæ•°ã‚’é›†è¨ˆ
  const priceRanges = ['~Â¥500', 'Â¥501-1000', 'Â¥1001-1500', 'Â¥1501-2000', 'Â¥2001~'];
  const popularityData = calculatePopularityByPriceRange(menus?.data || []);

  const chartData = {
    labels: priceRanges,
    datasets: [
      {
        label: 'å¹³å‡ãŠæ°—ã«å…¥ã‚Šæ•°',
        data: popularityData,
        backgroundColor: 'rgba(255, 159, 64, 0.6)',
      },
    ],
  };

  const options = {
    indexAxis: 'y' as const,
    responsive: true,
    plugins: {
      title: {
        display: true,
        text: 'ä¾¡æ ¼å¸¯åˆ¥äººæ°—åº¦',
      },
    },
  };

  return (
    <Paper sx={{ p: 3 }}>
      <Bar data={chartData} options={options} />
    </Paper>
  );
};
```

#### Day 9: å­£ç¯€é™å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

**ã‚¿ã‚¹ã‚¯ 7.2.4: SeasonalTimeline.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { Timeline, TimelineItem, TimelineSeparator, TimelineConnector, TimelineContent, TimelineDot } from '@mui/lab';
import { format } from 'date-fns';
import { ja } from 'date-fns/locale';

export const SeasonalTimeline: React.FC = () => {
  const seasonalMenus = [
    { name: 'ã‚¯ãƒªã‚¹ãƒã‚¹ã‚±ãƒ¼ã‚­', period: '12æœˆ', color: 'error' },
    { name: 'ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãƒãƒ§ã‚³', period: '2æœˆ', color: 'secondary' },
    { name: 'æ˜¥é™å®šãƒ‘ãƒ•ã‚§', period: '3-5æœˆ', color: 'success' },
    { name: 'å¤ç¥­ã‚Šã‹ãæ°·', period: '7-8æœˆ', color: 'info' },
  ];

  return (
    <Paper sx={{ p: 3 }}>
      <Typography variant="h6" gutterBottom>
        ğŸ—“ï¸ å­£ç¯€é™å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼
      </Typography>
      <Timeline position="alternate">
        {seasonalMenus.map((menu, index) => (
          <TimelineItem key={index}>
            <TimelineSeparator>
              <TimelineDot color={menu.color as any} />
              {index < seasonalMenus.length - 1 && <TimelineConnector />}
            </TimelineSeparator>
            <TimelineContent>
              <Typography variant="h6">{menu.name}</Typography>
              <Typography variant="body2" color="text.secondary">
                {menu.period}
              </Typography>
            </TimelineContent>
          </TimelineItem>
        ))}
      </Timeline>
    </Paper>
  );
};
```

---

### Phase 7.3: ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆ3æ—¥é–“ï¼‰

#### Day 10-11: CSV/JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ã‚¿ã‚¹ã‚¯ 7.3.1: file-saverã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install file-saver@2.0.5 @types/file-saver
```

**ã‚¿ã‚¹ã‚¯ 7.3.2: exportUtils.tsãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆ**

```typescript
import { saveAs } from 'file-saver';

export const exportToCSV = (menus: MenuItem[], filename: string) => {
  const headers = ['ID', 'åå‰', 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³', 'ãƒ‘ãƒ¼ã‚¯', 'ä¾¡æ ¼', 'ã‚«ãƒ†ã‚´ãƒª'];
  const rows = menus.map(menu => [
    menu.id,
    menu.name,
    menu.restaurant,
    menu.park === 'disneyland' ? 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ©ãƒ³ãƒ‰' : 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚·ãƒ¼',
    menu.price,
    menu.category,
  ]);

  const csvContent = [
    headers.join(','),
    ...rows.map(row => row.map(cell => `"${cell}"`).join(',')),
  ].join('\n');

  const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
  saveAs(blob, `${filename}.csv`);
};

export const exportToJSON = (data: any, filename: string) => {
  const jsonContent = JSON.stringify(data, null, 2);
  const blob = new Blob([jsonContent], { type: 'application/json' });
  saveAs(blob, `${filename}.json`);
};
```

**ã‚¿ã‚¹ã‚¯ 7.3.3: ExportButtons.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { Button, ButtonGroup, Menu, MenuItem } from '@mui/material';
import DownloadIcon from '@mui/icons-material/Download';
import { useState } from 'react';
import { exportToCSV, exportToJSON } from '../../utils/exportUtils';

export const ExportButtons: React.FC<{ menus: MenuItem[] }> = ({ menus }) => {
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);

  const handleExportCSV = () => {
    exportToCSV(menus, `disney-menus-${new Date().toISOString().split('T')[0]}`);
    setAnchorEl(null);
  };

  const handleExportJSON = () => {
    exportToJSON(menus, `disney-menus-${new Date().toISOString().split('T')[0]}`);
    setAnchorEl(null);
  };

  return (
    <>
      <Button
        variant="outlined"
        startIcon={<DownloadIcon />}
        onClick={(e) => setAnchorEl(e.currentTarget)}
      >
        ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
      </Button>
      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>
        <MenuItem onClick={handleExportCSV}>CSVå½¢å¼</MenuItem>
        <MenuItem onClick={handleExportJSON}>JSONå½¢å¼</MenuItem>
      </Menu>
    </>
  );
};
```

#### Day 12: çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

**ã‚¿ã‚¹ã‚¯ 7.3.4: StatisticsReport.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
export const StatisticsReport: React.FC = () => {
  const { data: stats } = useStatistics();
  const { data: response } = useMenus({ limit: 1000 });

  const generateReport = () => {
    const report = {
      generatedAt: new Date().toISOString(),
      summary: {
        totalMenus: stats?.totalMenus,
        averagePrice: stats?.averagePrice,
        priceRange: stats?.priceRange,
      },
      categoryDistribution: stats?.categoryDistribution,
      parkComparison: stats?.parkComparison,
      topExpensiveMenus: response?.data
        .sort((a, b) => b.price - a.price)
        .slice(0, 10),
      topCheapMenus: response?.data
        .sort((a, b) => a.price - b.price)
        .slice(0, 10),
    };

    exportToJSON(report, `disney-menu-report-${format(new Date(), 'yyyy-MM-dd')}`);
  };

  return (
    <Button
      variant="contained"
      startIcon={<DownloadIcon />}
      onClick={generateReport}
    >
      çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
    </Button>
  );
};
```

---

### Phase 7.4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆ2æ—¥é–“ï¼‰

#### Day 13: E2Eãƒ†ã‚¹ãƒˆä½œæˆ

**ã‚¿ã‚¹ã‚¯ 7.4.1: Phase 7ã®E2Eãƒ†ã‚¹ãƒˆï¼ˆ6ä»¶ï¼‰**

`statistics.spec.ts`:
```typescript
test('çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  await expect(page.locator('h4:has-text("çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")')).toBeVisible();
  await expect(page.locator('text=ç·ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ•°')).toBeVisible();
});

test('ä¾¡æ ¼åˆ†å¸ƒã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  await expect(page.locator('canvas').first()).toBeVisible();
});

test('ã‚«ãƒ†ã‚´ãƒªåˆ†å¸ƒã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  await expect(page.locator('canvas').nth(1)).toBeVisible();
});

test('CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå‹•ä½œã™ã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  const downloadPromise = page.waitForEvent('download');
  await page.click('text=ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ');
  await page.click('text=CSVå½¢å¼');
  const download = await downloadPromise;
  expect(download.suggestedFilename()).toContain('.csv');
});

test('JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå‹•ä½œã™ã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  const downloadPromise = page.waitForEvent('download');
  await page.click('text=ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ');
  await page.click('text=JSONå½¢å¼');
  const download = await downloadPromise;
  expect(download.suggestedFilename()).toContain('.json');
});

test('çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆãŒå‹•ä½œã™ã‚‹', async ({ page }) => {
  await page.goto('/statistics');
  const downloadPromise = page.waitForEvent('download');
  await page.click('text=çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ');
  await downloadPromise;
});
```

#### Day 14: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã¨æœ€çµ‚èª¿æ•´

**ã‚¿ã‚¹ã‚¯ 7.4.2: Chart.jsã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**

```typescript
// ã‚°ãƒ©ãƒ•ã®é…å»¶èª­ã¿è¾¼ã¿
const PriceDistributionChart = lazy(() => import('./PriceDistributionChart'));

// ãƒ‡ãƒ¼ã‚¿ã®ãƒ¡ãƒ¢åŒ–
const chartData = useMemo(() => {
  return calculateChartData(stats);
}, [stats]);
```

**ã‚¿ã‚¹ã‚¯ 7.4.3: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç¢ºèª**

```bash
npm run build -- --analyze
```

Phase 7è¿½åŠ åˆ†ã®ç›®æ¨™:
- Chart.js: +197KB
- date-fns: +20KB
- file-saver: +5KB
- åˆè¨ˆ: +220KBä»¥å†…

**ã‚¿ã‚¹ã‚¯ 7.4.4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã¨æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**

```bash
git add .
git commit -m "feat: Phase 7å®Ÿè£…å®Œäº† - ãƒ‡ãƒ¼ã‚¿åˆ†æã¨ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"
git push origin main
vercel --prod
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### E2Eãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ6ä»¶ï¼‰

1. çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ä¾¡æ ¼åˆ†å¸ƒã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. ã‚«ãƒ†ã‚´ãƒªåˆ†å¸ƒã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå‹•ä½œã™ã‚‹
5. JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå‹•ä½œã™ã‚‹
6. çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆãŒå‹•ä½œã™ã‚‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

- Lighthouseã‚¹ã‚³ã‚¢: 85ç‚¹ä»¥ä¸Šï¼ˆã‚°ãƒ©ãƒ•æç”»ã®ãŸã‚è‹¥å¹²ä½ä¸‹è¨±å®¹ï¼‰
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º: +220KBä»¥å†…
- ã‚°ãƒ©ãƒ•æç”»é€Ÿåº¦: 500msä»¥å†…

---

## ğŸ“Š æˆæœæŒ‡æ¨™

### å®šé‡æŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ |
|------|------|
| çµ±è¨ˆãƒšãƒ¼ã‚¸è¨ªå•ç‡ | 15%ä»¥ä¸Š |
| ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ•° | 20å›/æœˆ |
| çµ±è¨ˆãƒšãƒ¼ã‚¸æ»åœ¨æ™‚é–“ | 2åˆ†ä»¥ä¸Š |
| E2Eãƒ†ã‚¹ãƒˆç·æ•° | 34ä»¶ |

---

## ğŸš€ æ¬¡ã®Phase

### Phase 8äºˆå‘Š: ãƒãƒƒãƒ—æ©Ÿèƒ½ï¼ˆ3é€±é–“ï¼‰

- Google Maps APIçµ±åˆ
- ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ä½ç½®è¡¨ç¤º
- ãƒ«ãƒ¼ãƒˆæ¡ˆå†…æ©Ÿèƒ½

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Chart.js Documentation](https://www.chartjs.org/docs/latest/)
- [react-chartjs-2](https://react-chartjs-2.js.org/)
- [file-saver](https://github.com/eligrey/FileSaver.js/)
- [MUI Timeline](https://mui.com/material-ui/react-timeline/)
