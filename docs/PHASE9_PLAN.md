# Phase 9: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š - å®Ÿè£…è¨ˆç”»æ›¸

**æƒ³å®šæœŸé–“**: 2é€±é–“ï¼ˆå®Ÿåƒ14æ—¥ï¼‰  
**é–‹å§‹äºˆå®š**: Phase 8å®Œäº†å¾Œ  
**æ‹…å½“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰  
**ç›®çš„**: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã€å¤šè¨€èªå¯¾å¿œã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ–ã«ã‚ˆã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š

---

## ğŸ“Œ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ç›®æ¨™
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§å¤œé–“ã®ä½¿ç”¨ä½“é¨“ã‚’æ”¹å–„
- è‹±èªå¯¾å¿œã§è¨ªæ—¥å¤–å›½äººã«ã‚‚ã‚µãƒ¼ãƒ“ã‚¹æä¾›
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ–ã§WCAG 2.1 AAAæº–æ‹ 

### ä¸»è¦æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦é †ï¼‰

1. **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ** ğŸ”¥ï¼ˆ4æ—¥é–“ï¼‰
   - MUIãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
   - localStorageä¿å­˜
   - ã‚·ã‚¹ãƒ†ãƒ è¨­å®šé€£å‹•

2. **å¤šè¨€èªå¯¾å¿œï¼ˆi18nï¼‰** ğŸ”¥ï¼ˆ5æ—¥é–“ï¼‰
   - react-i18nextå°å…¥
   - æ—¥æœ¬èªãƒ»è‹±èªå¯¾å¿œ
   - è¨€èªåˆ‡æ›¿UI

3. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ–** ğŸŸ¡ï¼ˆ3æ—¥é–“ï¼‰
   - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œå¼·åŒ–
   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„
   - WCAG 2.1 AAAæº–æ‹ 

4. **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°** ğŸŸ¢ï¼ˆ2æ—¥é–“ï¼‰
   - E2Eãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ6ä»¶ï¼‰
   - axe-coreã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

---

## ğŸ¯ ç¾çŠ¶åˆ†æ

### âœ… Phase 8å®Œäº†æ™‚ç‚¹ã§ã®å®Ÿè£…çŠ¶æ³

#### ãƒ†ãƒ¼ãƒ
- âœ… MUIæ¨™æº–ãƒ†ãƒ¼ãƒï¼ˆãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰
- âŒ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒ†ãƒ¼ãƒãªã—
- âŒ ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ãªã—

#### è¨€èª
- âœ… æ—¥æœ¬èªã®ã¿
- âŒ å¤šè¨€èªå¯¾å¿œãªã—
- âŒ ç¿»è¨³ãƒ‡ãƒ¼ã‚¿ãªã—

#### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£
- âœ… åŸºæœ¬çš„ãªariaå±æ€§
- âš ï¸ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆæœªå®Ÿæ–½
- âš ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ä¸€éƒ¨ä¸è¶³

---

## ğŸ› ï¸ æŠ€è¡“è¨­è¨ˆ

### ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…

#### MUIãƒ†ãƒ¼ãƒè¨­è¨ˆ

```typescript
// theme.ts
import { createTheme } from '@mui/material/styles';

export const lightTheme = createTheme({
  palette: {
    mode: 'light',
    primary: {
      main: '#1976d2',
    },
    background: {
      default: '#ffffff',
      paper: '#f5f5f5',
    },
  },
});

export const darkTheme = createTheme({
  palette: {
    mode: 'dark',
    primary: {
      main: '#90caf9',
    },
    background: {
      default: '#121212',
      paper: '#1e1e1e',
    },
  },
});
```

#### localStorageä¿å­˜

```typescript
const THEME_KEY = 'disney-menu-theme';

export const getStoredTheme = (): 'light' | 'dark' | 'system' => {
  return (localStorage.getItem(THEME_KEY) as 'light' | 'dark' | 'system') || 'system';
};

export const setStoredTheme = (theme: 'light' | 'dark' | 'system') => {
  localStorage.setItem(THEME_KEY, theme);
};
```

### å¤šè¨€èªå¯¾å¿œï¼ˆi18nï¼‰

#### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé¸å®š

| ãƒ©ã‚¤ãƒ–ãƒ©ãƒª | ã‚µã‚¤ã‚ºï¼ˆgzipï¼‰ | ç‰¹å¾´ | æ¡ç”¨åˆ¤æ–­ |
|-----------|---------------|------|---------|
| react-i18next | 45KB | æœ€ã‚‚å®Ÿç¸¾è±Šå¯Œ | âœ… æ¡ç”¨ |
| react-intl | 85KB | Format.jsã€å¤šæ©Ÿèƒ½ | âŒ ã‚µã‚¤ã‚ºå¤§ |
| LinguiJS | 35KB | è»½é‡ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚æœ€é©åŒ– | âŒ å­¦ç¿’ã‚³ã‚¹ãƒˆé«˜ |

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm install react-i18next@14.0.5 i18next@23.8.2 i18next-browser-languagedetector@7.2.0
```

#### ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
frontend/src/locales/
â”œâ”€â”€ ja/
â”‚   â”œâ”€â”€ common.json
â”‚   â”œâ”€â”€ menu.json
â”‚   â”œâ”€â”€ restaurant.json
â”‚   â””â”€â”€ map.json
â””â”€â”€ en/
    â”œâ”€â”€ common.json
    â”œâ”€â”€ menu.json
    â”œâ”€â”€ restaurant.json
    â””â”€â”€ map.json
```

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

#### WCAG 2.1 AAAæº–æ‹ é …ç›®

| é …ç›® | ç¾çŠ¶ | ç›®æ¨™ |
|------|------|------|
| ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯” | AAæº–æ‹  | AAAï¼ˆ7:1ä»¥ä¸Šï¼‰ |
| ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ | æ¨™æº– | å¼·åŒ–ï¼ˆ3pxã€æ˜ç¢ºãªè‰²ï¼‰ |
| ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯ | ãªã— | è¿½åŠ  |
| aria-label | ä¸€éƒ¨ã®ã¿ | å…¨è¦ç´ ã«é©ç”¨ |
| ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒˆãƒ©ãƒƒãƒ— | ãªã— | æ¤œè¨¼æ¸ˆã¿ |

#### ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
- axe-core: è‡ªå‹•ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
- NVDA: Windowsã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼
- VoiceOver: macOSã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼

---

## ğŸ“… å®Ÿè£…æ‰‹é †

### Phase 9.1: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼ˆ4æ—¥é–“ï¼‰

#### Day 1: ãƒ†ãƒ¼ãƒä½œæˆã¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š

**ã‚¿ã‚¹ã‚¯ 9.1.1: theme.tsä½œæˆ**

```typescript
import { createTheme, PaletteMode } from '@mui/material/styles';

export const getTheme = (mode: PaletteMode) => {
  return createTheme({
    palette: {
      mode,
      ...(mode === 'light'
        ? {
            // ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰
            primary: { main: '#1976d2' },
            secondary: { main: '#dc004e' },
            background: {
              default: '#ffffff',
              paper: '#f5f5f5',
            },
          }
        : {
            // ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰
            primary: { main: '#90caf9' },
            secondary: { main: '#f48fb1' },
            background: {
              default: '#0a1929',
              paper: '#132f4c',
            },
          }),
    },
    typography: {
      fontFamily: [
        '"Noto Sans JP"',
        'Roboto',
        'sans-serif',
      ].join(','),
    },
    components: {
      MuiCard: {
        styleOverrides: {
          root: {
            boxShadow: mode === 'dark' 
              ? '0 4px 6px rgba(0, 0, 0, 0.5)' 
              : '0 2px 4px rgba(0, 0, 0, 0.1)',
          },
        },
      },
    },
  });
};
```

**ã‚¿ã‚¹ã‚¯ 9.1.2: ThemeProvider.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { ThemeProvider as MuiThemeProvider, CssBaseline } from '@mui/material';
import { createContext, useContext, useState, useEffect, useMemo } from 'react';
import { getTheme } from './theme';

type ThemeMode = 'light' | 'dark' | 'system';

interface ThemeContextType {
  mode: ThemeMode;
  toggleTheme: (mode: ThemeMode) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const useThemeMode = () => {
  const context = useContext(ThemeContext);
  if (!context) throw new Error('useThemeMode must be used within ThemeProvider');
  return context;
};

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [mode, setMode] = useState<ThemeMode>(() => {
    return (localStorage.getItem('disney-menu-theme') as ThemeMode) || 'system';
  });

  const systemTheme = useMemo(() => {
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  }, []);

  const activeMode = mode === 'system' ? systemTheme : mode;
  const theme = useMemo(() => getTheme(activeMode), [activeMode]);

  const toggleTheme = (newMode: ThemeMode) => {
    setMode(newMode);
    localStorage.setItem('disney-menu-theme', newMode);
  };

  // ã‚·ã‚¹ãƒ†ãƒ è¨­å®šå¤‰æ›´ã®ç›£è¦–
  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handleChange = () => {
      if (mode === 'system') {
        setMode('system'); // å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒˆãƒªã‚¬ãƒ¼
      }
    };
    mediaQuery.addEventListener('change', handleChange);
    return () => mediaQuery.removeEventListener('change', handleChange);
  }, [mode]);

  return (
    <ThemeContext.Provider value={{ mode, toggleTheme }}>
      <MuiThemeProvider theme={theme}>
        <CssBaseline />
        {children}
      </MuiThemeProvider>
    </ThemeContext.Provider>
  );
};
```

#### Day 2: ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆUI

**ã‚¿ã‚¹ã‚¯ 9.1.3: ThemeToggle.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { IconButton, Menu, MenuItem, ListItemIcon, ListItemText } from '@mui/material';
import {
  Brightness4,
  Brightness7,
  SettingsBrightness,
} from '@mui/icons-material';
import { useState } from 'react';
import { useThemeMode } from '../../contexts/ThemeProvider';

export const ThemeToggle = () => {
  const { mode, toggleTheme } = useThemeMode();
  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);

  const themeOptions = [
    { value: 'light', label: 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰', icon: <Brightness7 /> },
    { value: 'dark', label: 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰', icon: <Brightness4 /> },
    { value: 'system', label: 'ã‚·ã‚¹ãƒ†ãƒ è¨­å®š', icon: <SettingsBrightness /> },
  ];

  return (
    <>
      <IconButton
        color="inherit"
        onClick={(e) => setAnchorEl(e.currentTarget)}
        aria-label="ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ"
      >
        {mode === 'light' ? <Brightness7 /> : <Brightness4 />}
      </IconButton>
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={() => setAnchorEl(null)}
      >
        {themeOptions.map((option) => (
          <MenuItem
            key={option.value}
            selected={mode === option.value}
            onClick={() => {
              toggleTheme(option.value as ThemeMode);
              setAnchorEl(null);
            }}
          >
            <ListItemIcon>{option.icon}</ListItemIcon>
            <ListItemText>{option.label}</ListItemText>
          </MenuItem>
        ))}
      </Menu>
    </>
  );
};
```

#### Day 3-4: ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œèª¿æ•´

**ã‚¿ã‚¹ã‚¯ 9.1.4: ç”»åƒã¨ã‚¢ã‚¤ã‚³ãƒ³ã®èª¿æ•´**

```typescript
// ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ç”»åƒã‚’æš—ãã™ã‚‹
<CardMedia
  component="img"
  image={menu.imageUrl}
  sx={(theme) => ({
    filter: theme.palette.mode === 'dark' ? 'brightness(0.8)' : 'none',
  })}
/>

// SVGã‚¢ã‚¤ã‚³ãƒ³ã®è‰²ã‚’è‡ªå‹•èª¿æ•´
<SvgIcon
  sx={(theme) => ({
    color: theme.palette.mode === 'dark' ? 'grey.300' : 'grey.700',
  })}
/>
```

**ã‚¿ã‚¹ã‚¯ 9.1.5: Chart.jsã®ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ**

```typescript
const chartOptions = {
  scales: {
    x: {
      ticks: {
        color: theme.palette.mode === 'dark' ? '#fff' : '#000',
      },
      grid: {
        color: theme.palette.mode === 'dark' 
          ? 'rgba(255, 255, 255, 0.1)' 
          : 'rgba(0, 0, 0, 0.1)',
      },
    },
  },
};
```

---

### Phase 9.2: å¤šè¨€èªå¯¾å¿œï¼ˆ5æ—¥é–“ï¼‰

#### Day 5: i18nextè¨­å®š

**ã‚¿ã‚¹ã‚¯ 9.2.1: i18nextã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š**

```bash
npm install react-i18next@14.0.5 i18next@23.8.2 i18next-browser-languagedetector@7.2.0
```

**ã‚¿ã‚¹ã‚¯ 9.2.2: i18n.tsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

import commonJa from './locales/ja/common.json';
import commonEn from './locales/en/common.json';
import menuJa from './locales/ja/menu.json';
import menuEn from './locales/en/menu.json';

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      ja: {
        common: commonJa,
        menu: menuJa,
      },
      en: {
        common: commonEn,
        menu: menuEn,
      },
    },
    fallbackLng: 'ja',
    defaultNS: 'common',
    interpolation: {
      escapeValue: false,
    },
  });

export default i18n;
```

#### Day 6-7: ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**ã‚¿ã‚¹ã‚¯ 9.2.3: æ—¥æœ¬èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«**

`locales/ja/common.json`:
```json
{
  "app": {
    "title": "ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œç´¢",
    "description": "æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆã®å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¤œç´¢"
  },
  "navigation": {
    "home": "ãƒ›ãƒ¼ãƒ ",
    "favorites": "ãŠæ°—ã«å…¥ã‚Š",
    "restaurants": "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³",
    "map": "ãƒãƒƒãƒ—",
    "statistics": "çµ±è¨ˆ"
  },
  "search": {
    "placeholder": "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ¤œç´¢...",
    "results": "{{count}}ä»¶ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ",
    "noResults": "è©²å½“ã™ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"
  }
}
```

`locales/ja/menu.json`:
```json
{
  "category": {
    "main": "ãƒ¡ã‚¤ãƒ³",
    "side": "ã‚µã‚¤ãƒ‰",
    "dessert": "ãƒ‡ã‚¶ãƒ¼ãƒˆ",
    "drink": "ãƒ‰ãƒªãƒ³ã‚¯"
  },
  "price": "ä¾¡æ ¼",
  "restaurant": "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³",
  "park": "ãƒ‘ãƒ¼ã‚¯",
  "addToFavorites": "ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ",
  "removeFromFavorites": "ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤"
}
```

**ã‚¿ã‚¹ã‚¯ 9.2.4: è‹±èªç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«**

`locales/en/common.json`:
```json
{
  "app": {
    "title": "Disney Menu Search",
    "description": "Search all menus at Tokyo Disney Resort"
  },
  "navigation": {
    "home": "Home",
    "favorites": "Favorites",
    "restaurants": "Restaurants",
    "map": "Map",
    "statistics": "Statistics"
  },
  "search": {
    "placeholder": "Search menus...",
    "results": "{{count}} menus found",
    "noResults": "No menus found"
  }
}
```

`locales/en/menu.json`:
```json
{
  "category": {
    "main": "Main Dish",
    "side": "Side Dish",
    "dessert": "Dessert",
    "drink": "Drink"
  },
  "price": "Price",
  "restaurant": "Restaurant",
  "park": "Park",
  "addToFavorites": "Add to Favorites",
  "removeFromFavorites": "Remove from Favorites"
}
```

#### Day 8: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®é©ç”¨

**ã‚¿ã‚¹ã‚¯ 9.2.5: useTranslation Hookä½¿ç”¨**

```typescript
import { useTranslation } from 'react-i18next';

export const SearchBar = () => {
  const { t } = useTranslation('common');

  return (
    <TextField
      placeholder={t('search.placeholder')}
      // ...
    />
  );
};

export const MenuCard = ({ menu }: { menu: MenuItem }) => {
  const { t } = useTranslation('menu');

  return (
    <Card>
      <CardContent>
        <Typography>{t('price')}: Â¥{menu.price}</Typography>
        <Typography>{t('restaurant')}: {menu.restaurant}</Typography>
      </CardContent>
    </Card>
  );
};
```

#### Day 9: è¨€èªåˆ‡æ›¿UI

**ã‚¿ã‚¹ã‚¯ 9.2.6: LanguageSelector.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
import { Select, MenuItem, FormControl } from '@mui/material';
import { useTranslation } from 'react-i18next';
import LanguageIcon from '@mui/icons-material/Language';

export const LanguageSelector = () => {
  const { i18n } = useTranslation();

  const languages = [
    { code: 'ja', label: 'æ—¥æœ¬èª' },
    { code: 'en', label: 'English' },
  ];

  return (
    <FormControl size="small">
      <Select
        value={i18n.language}
        onChange={(e) => i18n.changeLanguage(e.target.value)}
        startAdornment={<LanguageIcon />}
      >
        {languages.map((lang) => (
          <MenuItem key={lang.code} value={lang.code}>
            {lang.label}
          </MenuItem>
        ))}
      </Select>
    </FormControl>
  );
};
```

---

### Phase 9.3: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¼·åŒ–ï¼ˆ3æ—¥é–“ï¼‰

#### Day 10: ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†

**ã‚¿ã‚¹ã‚¯ 9.3.1: SkipLink.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

```typescript
export const SkipLink = () => {
  return (
    <a
      href="#main-content"
      style={{
        position: 'absolute',
        left: '-9999px',
        zIndex: 999,
        padding: '1em',
        backgroundColor: '#000',
        color: '#fff',
        textDecoration: 'none',
      }}
      onFocus={(e) => {
        e.currentTarget.style.left = '0';
      }}
      onBlur={(e) => {
        e.currentTarget.style.left = '-9999px';
      }}
    >
      ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã‚¹ã‚­ãƒƒãƒ—
    </a>
  );
};
```

**ã‚¿ã‚¹ã‚¯ 9.3.2: FocusTrap.tsxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨ï¼‰**

```typescript
import { useEffect, useRef } from 'react';

export const useFocusTrap = (isActive: boolean) => {
  const containerRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (!isActive || !containerRef.current) return;

    const focusableElements = containerRef.current.querySelectorAll(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );

    const firstElement = focusableElements[0] as HTMLElement;
    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;

    const handleTab = (e: KeyboardEvent) => {
      if (e.key !== 'Tab') return;

      if (e.shiftKey && document.activeElement === firstElement) {
        e.preventDefault();
        lastElement.focus();
      } else if (!e.shiftKey && document.activeElement === lastElement) {
        e.preventDefault();
        firstElement.focus();
      }
    };

    firstElement?.focus();
    document.addEventListener('keydown', handleTab);

    return () => document.removeEventListener('keydown', handleTab);
  }, [isActive]);

  return containerRef;
};
```

#### Day 11: ariaå±æ€§å¼·åŒ–

**ã‚¿ã‚¹ã‚¯ 9.3.3: ariaå±æ€§ã®è¿½åŠ **

```typescript
// æ¤œç´¢ãƒãƒ¼
<TextField
  aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œç´¢"
  aria-describedby="search-help-text"
  // ...
/>
<Typography id="search-help-text" variant="caption">
  ãƒ¡ãƒ‹ãƒ¥ãƒ¼åã‚„èª¬æ˜æ–‡ã§æ¤œç´¢ã§ãã¾ã™
</Typography>

// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ‘ãƒãƒ«
<Box role="region" aria-label="ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ‘ãƒãƒ«">
  <FormControl>
    <InputLabel id="park-filter-label">ãƒ‘ãƒ¼ã‚¯</InputLabel>
    <Select
      labelId="park-filter-label"
      aria-label="ãƒ‘ãƒ¼ã‚¯ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼"
      // ...
    />
  </FormControl>
</Box>

// ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰
<Card
  role="article"
  aria-labelledby={`menu-${menu.id}-title`}
>
  <Typography id={`menu-${menu.id}-title`} variant="h6">
    {menu.name}
  </Typography>
</Card>

// ãŠæ°—ã«å…¥ã‚Šãƒœã‚¿ãƒ³
<IconButton
  aria-label={isFavorite ? 'ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤' : 'ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ '}
  aria-pressed={isFavorite}
  onClick={handleToggleFavorite}
>
  <FavoriteIcon />
</IconButton>
```

#### Day 12: ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”æ”¹å–„

**ã‚¿ã‚¹ã‚¯ 9.3.4: WCAG AAAæº–æ‹ ã®è‰²è¨­å®š**

```typescript
const theme = createTheme({
  palette: {
    primary: {
      main: '#0d47a1', // ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”7.8:1ï¼ˆAAAæº–æ‹ ï¼‰
      contrastText: '#ffffff',
    },
    secondary: {
      main: '#c62828', // ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”8.2:1ï¼ˆAAAæº–æ‹ ï¼‰
      contrastText: '#ffffff',
    },
    text: {
      primary: 'rgba(0, 0, 0, 0.95)', // ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”19:1
      secondary: 'rgba(0, 0, 0, 0.75)', // ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”12:1
    },
  },
});
```

**ã‚¿ã‚¹ã‚¯ 9.3.5: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼å¼·åŒ–**

```css
/* global.css */
:focus-visible {
  outline: 3px solid #2196f3;
  outline-offset: 2px;
}

button:focus-visible {
  outline: 3px solid #1976d2;
  outline-offset: 2px;
}
```

---

### Phase 9.4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆ2æ—¥é–“ï¼‰

#### Day 13: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

**ã‚¿ã‚¹ã‚¯ 9.4.1: axe-coreã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š**

```bash
npm install -D @axe-core/playwright@4.8.3
```

**ã‚¿ã‚¹ã‚¯ 9.4.2: accessibility.spec.tsä½œæˆ**

```typescript
import { test, expect } from '@playwright/test';
import AxeBuilder from '@axe-core/playwright';

test('ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£', async ({ page }) => {
  await page.goto('/');
  const accessibilityScanResults = await new AxeBuilder({ page })
    .withTags(['wcag2a', 'wcag2aa', 'wcag21aa'])
    .analyze();

  expect(accessibilityScanResults.violations).toEqual([]);
});

test('ãƒ¡ãƒ‹ãƒ¥ãƒ¼è©³ç´°ãƒšãƒ¼ã‚¸ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£', async ({ page }) => {
  await page.goto('/menu/0001');
  const results = await new AxeBuilder({ page }).analyze();
  expect(results.violations).toEqual([]);
});

test('ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³', async ({ page }) => {
  await page.goto('/');
  
  // Tabã‚­ãƒ¼ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•
  await page.keyboard.press('Tab');
  await expect(page.locator(':focus')).toHaveAttribute('href', '/');
  
  await page.keyboard.press('Tab');
  await expect(page.locator(':focus')).toHaveAttribute('aria-label', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ¤œç´¢');
});
```

#### Day 14: æœ€çµ‚èª¿æ•´ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

**ã‚¿ã‚¹ã‚¯ 9.4.3: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ**

- NVDAï¼ˆWindowsï¼‰ã§ãƒ†ã‚¹ãƒˆ
- VoiceOverï¼ˆmacOSï¼‰ã§ãƒ†ã‚¹ãƒˆ
- éŸ³å£°èª­ã¿ä¸Šã’ã®ç¢ºèª

**ã‚¿ã‚¹ã‚¯ 9.4.4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**

README.mdã«è¿½åŠ :
```markdown
## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

- WCAG 2.1 AAAæº–æ‹ 
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œå¯¾å¿œ
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- å¤šè¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èªãƒ»è‹±èªï¼‰
```

**ã‚¿ã‚¹ã‚¯ 9.4.5: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**

```bash
git add .
git commit -m "feat: Phase 9å®Ÿè£…å®Œäº† - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š"
git push origin main
vercel --prod
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### E2Eãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ6ä»¶ï¼‰

1. ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆãŒå‹•ä½œã™ã‚‹
2. ãƒ†ãƒ¼ãƒãŒlocalStorageã«ä¿å­˜ã•ã‚Œã‚‹
3. è¨€èªåˆ‡æ›¿ãŒå‹•ä½œã™ã‚‹
4. è‹±èªè¡¨ç¤ºãŒæ­£ã—ã„
5. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹
6. ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯ãŒå‹•ä½œã™ã‚‹

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

- axe-core: å…¨ãƒšãƒ¼ã‚¸ã§0violations
- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼: ä¸»è¦æ©Ÿèƒ½ãŒæ“ä½œå¯èƒ½
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: å…¨æ©Ÿèƒ½ãŒTabã‚­ãƒ¼ã§æ“ä½œå¯èƒ½

---

## ğŸ“Š æˆæœæŒ‡æ¨™

### å®šé‡æŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ |
|------|------|
| ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ©ç”¨ç‡ | 30%ä»¥ä¸Š |
| è‹±èªãƒ¦ãƒ¼ã‚¶ãƒ¼è¨ªå•æ•° | 100äºº/æœˆ |
| ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢ | 100ç‚¹ |
| E2Eãƒ†ã‚¹ãƒˆç·æ•° | 48ä»¶ |

---

## ğŸš€ æ¬¡ã®Phase

### Phase 10äºˆå‘Š: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆ1é€±é–“ï¼‰

- Code Splitting
- ç”»åƒæœ€é©åŒ–ï¼ˆWebPå¯¾å¿œï¼‰
- PWAå¯¾å¿œ

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [MUI Theming](https://mui.com/material-ui/customization/theming/)
- [react-i18next](https://react.i18next.com/)
- [WCAG 2.1](https://www.w3.org/TR/WCAG21/)
- [axe-core](https://github.com/dequelabs/axe-core)
